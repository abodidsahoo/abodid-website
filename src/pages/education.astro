---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getEducation } from "../lib/api";

const education = await getEducation();
const pageTitle = "Education";
---

<BaseLayout title={pageTitle}>
    <header class="page-header">
        <h1>{pageTitle}</h1>
        <p class="section-intro">
            My academic journey and the institutions that have shaped my
            practice.
        </p>
    </header>

    <div class="education-container">
        {
            education.map((edu) => (
                <div class="education-item">
                    <div class="edu-header">
                        <h2 class="institution">{edu.institution}</h2>
                        <span class="location">{edu.location}</span>
                    </div>

                    <div class="edu-meta">
                        <span class="degree">{edu.degree}</span>
                        <span class="separator">•</span>
                        <span class="course">{edu.course}</span>
                        <span class="separator">•</span>
                        <span class="years">
                            {edu.start_year} - {edu.end_year}
                        </span>
                    </div>

                    <div class="edu-content">
                        <p class="details">{edu.details}</p>
                        {edu.specialization && (
                            <p class="specialization">
                                <strong>Focus:</strong> {edu.specialization}
                            </p>
                        )}
                        {edu.link_url && (
                            <a href={edu.link_url} class="edu-link">
                                {edu.link_text || "View Related Work"}{" "}
                                <span class="arrow">→</span>
                            </a>
                        )}
                    </div>
                </div>
            ))
        }
    </div>
</BaseLayout>

<style>
    .page-header {
        margin-bottom: 5rem;
        padding-top: 2rem;
        text-align: left;
    }

    h1 {
        font-family: "Poppins", sans-serif;
        font-size: 3rem;
        font-weight: 500;
        margin-bottom: 1rem;
        color: var(--text-primary);
    }

    .section-intro {
        font-family: var(--font-sans);
        font-size: 1.1rem;
        color: var(--text-secondary);
        max-width: 600px;
        margin: 0;
        line-height: 1.6;
    }

    .education-container {
        display: flex;
        flex-direction: column;
        gap: 4rem;
        max-width: 900px;
    }

    .education-item {
        border-bottom: 1px solid var(--border-subtle);
        padding-bottom: 4rem;
    }

    .education-item:last-child {
        border-bottom: none;
    }

    .edu-header {
        display: flex;
        align-items: baseline;
        gap: 1rem;
        margin-bottom: 0.5rem;
        flex-wrap: wrap;
    }

    .institution {
        font-family: var(--font-serif);
        font-size: 2rem;
        font-weight: 400;
        margin: 0;
        color: var(--text-primary);
    }

    .location {
        font-family: var(--font-mono);
        font-size: 0.9rem;
        color: var(--text-tertiary);
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .edu-meta {
        font-family: var(--font-sans);
        color: var(--text-secondary);
        font-size: 1rem;
        margin-bottom: 1.5rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        align-items: center;
    }

    .course {
        color: var(--text-primary);
        font-weight: 500;
    }

    .separator {
        color: var(--text-tertiary);
        font-size: 0.8em;
    }

    .edu-content {
        font-family: var(--font-sans);
        color: var(--text-secondary);
        line-height: 1.7;
    }

    .details {
        margin-bottom: 1rem;
    }

    .specialization {
        margin-bottom: 1.5rem;
        font-style: italic;
        color: var(--text-tertiary);
    }

    .specialization strong {
        color: var(--text-secondary);
        font-style: normal;
    }

    .edu-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 500;
        margin-top: 0.5rem;
        padding-bottom: 2px;
        border-bottom: 1px solid transparent;
        transition: border-bottom-color 0.2s ease;
    }

    .edu-link:hover {
        border-bottom-color: var(--text-primary);
    }

    .arrow {
        transition: transform 0.2s ease;
    }

    .edu-link:hover .arrow {
        transform: translateX(4px);
    }

    @media (max-width: 600px) {
        .edu-header {
            flex-direction: column;
            gap: 0.2rem;
        }
        .institution {
            font-size: 1.75rem;
        }
        .edu-meta {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.2rem;
        }
        .separator {
            display: none;
        }
    }
</style>
